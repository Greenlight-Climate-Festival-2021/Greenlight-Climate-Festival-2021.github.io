<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Greenlight Climate Festival</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Spartan:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'Spartan', sans-serif;
    }

    .is-serif,
    .is-serif>* {
      font-family: 'PT Serif', serif !important;
    }
  </style>
  <script>
    const internals = {}

    /** @param {number} ms */
    internals.timeout = ms => {
      return new Promise(resolve => {
        setTimeout(resolve, ms)
      })
    }

    /** @param {number} seconds */
    internals.formatTime = seconds => {
      const pad = number => `${number}`.padStart(2, 0)

      let minute = Math.floor(seconds / 60)
      const second = Math.round(seconds % 60)
      if (minute > 60) {
        const hour = Math.floor(minute / 60)
        minute = Math.floor(minute % 60)
        return `${hour}:${pad(minute)}:${pad(second)}`
      }
      return `${minute}:${pad(second)}`
    }

    class Timer {
      /** @param {HTMLElement} element */
      constructor(element = document.querySelector('[data-countdown-date]')) {
        this.element = element
        this.endTime = new Date(element.dataset.countdownDate)
        this.isCancelled = false

        this.cancel = this.cancel.bind(this)
        this.run = this.run.bind(this)
      }

      cancel() {
        console.log(`[Timer] Cancelling ${this.length} minute timer`)
        this.isCancelled = true
      }

      async run() {
        console.log(`[Timer] Starting ${this.length} minute timer`)
        const startTime = Date.now()
        const finishTime = this.endTime.getTime()

        while (finishTime > Date.now()) {
          const seconds = Math.round((finishTime - Date.now()) / 1000)
          this.element.textContent = internals.formatTime(seconds)
          await internals.timeout(1000)
        }

        this.element.textContent = '0:00'
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const element = document.querySelector('[data-countdown-date]')
      const timer = new Timer(element)
      timer.run()
    })
  </script>
</head>




<body>
  
<ul>
    <li><a href="/climate-justice.html">Climate Justice</a></li>
    <li><a href="/sustainability-at-cuny.html">Sustainability at CUNY</a></li>
    <li><a href="/nyc-climate-action.html">NYC Climate Action</a></li>
    <li><a href="/environmental-nonprofits-and-ngos.html">Environmental Nonprofits and NGOs</a></li>

</ul>

  <script src="scripts.js"></script>
</body>

</html>